<!DOCTYPE html>
<html>
<head>
  <title>Smart To-Do List</title>
  <style>
    body {
        background-color: #070F2B;
        font-family: sans-serif;
        margin: 0px;
        padding: 20px;
        text-align: center;
    }
    input, button{
        padding: 8px 12px;
        margin : 4px;
        border: 2px solid #7A73D1;
        border-radius: 6px;
        background-color: #1B1A55;
        color: #fff;
        outline: none;
    }
    ul{
        list-style-type: none;
        padding-left: 0;
    }
     li {
        margin-bottom: 8px;
        color: #7A73D1;
     }
    button {
        padding: 8px 12px;
        margin: 4px;
        border: none;
        background-color: #7A73D1;
        color: white;
        cursor: pointer;
        border-radius: 5px;
        transition: all 0.2s ease-in-out;
}

    button:hover {
        background-color: #9f95f7;
        transform: scale(1.05);
        box-shadow: 0 0 10px #9f95f7;
}
    .task-container {
        background-color: #1B1A55;
        padding: 15px;
        border-radius: 22px;
        box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3);
        display: inline-block;
        margin-top: 15px;
}
    .action-buttons button{
        min-width: 120px;
    }


  </style>
</head>
<body>
  <h2 style="color:#7A73D1">To-Do List</h2>
  <p style = "color: #7A73D1">Waktu Sekarang: <span id="clock"></span></p>
  
  <div class ="task-container">
    <input id="taskInput" placeholder="Tambah tugas..." />
    <button onclick="addTask()">Tambah</button>

    <ul id="taskList"></ul>

    <div id="statusMessage" style="margin-top: 12px;"></div>

    <div class="action-buttons" id="action-buttons" style="display: none;">
        <button onclick="markAllDone()">Selesai semua</button>
        <button onclick="markAllDelete()">Batal semua</button>
        <button onclick="deleteAll()">Hapus semua</button>
    </div>
  </div>
  <div id="customConfirm" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background-color: rgba(0, 0, 0, 0.6); display: flex; align-items: center; justify-content: center; z-index: 9999;">
        <div style="background-color: #1B1A55; color: white; padding: 20px; text-align: center; border-radius: 20px;">
            <img src="./Cammelya 2.jpeg" alt="warning" style="width: 100px; margin-bottom: 12px; border-radius: 10px;"/>
            <p>Noooo, Jangan dihapusss!!!</p>
            <button onclick="confirmDelete(true)">Iyap</button>
            <button onclick="confirmDelete(false)">Nope</button>
        </div>    
    </div>

  <ul id="taskList"></ul>
  <p id="statusMessage" style="color: #7A73D1; font-weight: bold;"></p>

  <script>
    let tasks = JSON.parse(localStorage.getItem('tasks')) || [];

    function renderTasks() {
      const list = document.getElementById('taskList');
      const statusMessage = document.getElementById('statusMessage');
      const actionButtons = document.getElementById('action-buttons');
      list.innerHTML = '';

      tasks.forEach((task, i) => {
        const item = document.createElement('li');
        item.innerHTML = `
          ${task.done ? "✅" : "⬜"} ${task.name}
          <button onclick="toggleDone(${i})">${task.done ? "Batal" : "Selesai"}</button>
          <button onclick="deleteTask(${i})">Hapus</button>
        `;
        list.appendChild(item);
      });

      if(tasks.length === 0) {
        statusMessage.innerHTML = '';
        actionButtons.style.display ='none';
      } else {
        actionButtons.style.display = 'flex';
        actionButtons.style.justifyContent = 'center';

        if (tasks.every(task => task.done)) {
        statusMessage.innerHTML = `<img src="./Cammelya.jpeg" alt="selesai" style="margin-bottom: 12px; width: 100px; display: block; margin: 0 auto;">
        <p style="color: #7A73D1; font-family: sans-serif; font-size: 16px; margin-top: 8px;">
            Sudah Selesai Hehe^^</p>`;
      } else {
        statusMessage.innerHTML = ``;
      }
    }
      localStorage.setItem('tasks', JSON.stringify(tasks));
    }

    function addTask() {
      const input = document.getElementById('taskInput');
      const name = input.value.trim();
      if (name) {
        tasks.push({ name, done: false });
        input.value = '';
        renderTasks();
      }
    }

    function deleteTask(index) {
      tasks.splice(index, 1);
      renderTasks();
    }

    function toggleDone(index) {
      tasks[index].done = !tasks[index].done;
      renderTasks();
    }

    function markAllDone() {
        tasks = tasks.map(task => ({ ...task, done: true}));
        renderTasks();
    }
    function markAllDelete() {
        tasks = tasks.map(task => ({ ...task, done: false}));
        renderTasks();
    }

    function deleteAll(){
        document.getElementById('customConfirm').style.display = 'flex';
    }

    function confirmDelete(confirmed) {
        document.getElementById('customConfirm').style.display = 'none';
        if (confirmed) {
            tasks = [];
            renderTasks();
        }
    }
    // Jam real-time
    setInterval(() => {
      const now = new Date();
      document.getElementById('clock').innerText = now.toLocaleTimeString();
    }, 1000);

    renderTasks();
  </script>
</body>
</html>